badge: false
crate: libadalang2xml
creation_timestamp: 1711067531.314294
distro: darwin-21.6.0
duration: 28.462036062999914
gnat: 10.3.2
last_attempt: 2024-03-22 00:38:49.124618+00:00
log:
- 'Test ran at 2024-03-22 00:38:49.124495+00:00


  '
- 'SOLUTION:

  '
- 'libadalang2xml=1.0.2: Generates XML for Ada source, using libadalang.

  '
- 'Origin: commit 99ee1dd171cd66736f38e770a751a15ad7ffc334 from https://github.com/simonjwright/libadalang2xml.git

  '
- 'Properties:

  '
- '   Author: Simon Wright

  '
- "   Build Switches: \n"
- '   Description: Generates XML for Ada source, using libadalang.

  '
- '   Executable: libadalang2xml

  '
- '   License: GPL-3.0-or-later

  '
- '   Long_Description: Libadalang2XML is a tool to extract syntatic aspects of Ada
  source code into XML.

  '
- '

  '
- 'The Ada source is initially read using [Libadalang](https://github.com/AdaCore/libadalang).
  The resulting tree is then traversed, and its structure output in an XML form.

  '
- '

  '
- 'The [document type definition](https://en.wikipedia.org/wiki/Document_type_definition)
  isn''t explicit; it''s simply derived from the tree elements created by Libadalang.
  Note that Libadalang includes much more semantic information than the surface structure
  generated by this tool, but nevertheless there''s enough there to --- for example
  --- create a scriptable body for a package spec.

  '
- '

  '
- '## Building on macOS ##

  '
- '

  '
- 'Using the standard `langkit_support`, `libadalang` crates, you **must** build with
  `LIBRARY_TYPE` set to `relocatable`.

  '
- '

  '
- 'You can obtain versions of those crates adjusted to not require those features,
  which can therefore build the (default) static libraries, by visiting https://github.com/simonjwright/alire-index.mac.

  '
- '

  '
- '## Example ##

  '
- '

  '
- 'As an example of the output, this code

  '
- '``` ada

  '
- 'package Demo is

  '
- '   procedure Square (X : in out Integer);

  '
- 'end Demo;

  '
- '```

  '
- 'generates

  '
- '``` xml

  '
- '<CompilationUnit>

  '
- '  <AdaNodeList/>

  '
- '  <LibraryItem>

  '
- '    <PrivateAbsent/>

  '
- '    <PackageDecl>

  '
- '      <DefiningName>

  '
- '        <Id>Demo</Id>

  '
- '      </DefiningName>

  '
- '      <PublicPart>

  '
- '        <AdaNodeList>

  '
- '          <SubpDecl>

  '
- '            <OverridingUnspecified/>

  '
- '            <SubpSpec>

  '
- '              <SubpKindProcedure>procedure</SubpKindProcedure>

  '
- '              <DefiningName>

  '
- '                <Id>Square</Id>

  '
- '              </DefiningName>

  '
- '              <Params>

  '
- '                <ParamSpecList>

  '
- '                  <ParamSpec>

  '
- '                    <DefiningNameList>

  '
- '                      <DefiningName>

  '
- '                        <Id>X</Id>

  '
- '                      </DefiningName>

  '
- '                    </DefiningNameList>

  '
- '                    <AliasedAbsent/>

  '
- '                    <ModeInOut>in out</ModeInOut>

  '
- '                    <SubtypeIndication>

  '
- '                      <NotNullAbsent/>

  '
- '                      <Id>Integer</Id>

  '
- '                    </SubtypeIndication>

  '
- '                  </ParamSpec>

  '
- '                </ParamSpecList>

  '
- '              </Params>

  '
- '            </SubpSpec>

  '
- '          </SubpDecl>

  '
- '        </AdaNodeList>

  '
- '      </PublicPart>

  '
- '      <EndName>

  '
- '        <Id>Demo</Id>

  '
- '      </EndName>

  '
- '    </PackageDecl>

  '
- '  </LibraryItem>

  '
- '  <PragmaNodeList/>

  '
- '</CompilationUnit>

  '
- '```

  '
- '

  '
- '   Maintainer: Simon Wright <simon@pushface.org>

  '
- '   Maintainers_Logins: simonjwright

  '
- '   Name: libadalang2xml

  '
- '   Tag: ada

  '
- '   Tag: xml

  '
- '   Version: 1.0.2

  '
- '   Website: https://github.com/simonjwright/libadalang2xml

  '
- 'Dependencies (direct):

  '
- '   libadalang*

  '
- 'Dependencies (solution):

  '
- '   gnat=10.3.2 (gnat_native)

  '
- '   gnatcoll=21.0.0

  '
- '   gnatcoll_gmp=21.0.0

  '
- '   gnatcoll_iconv=21.0.0

  '
- '   langkit_support=21.0.0

  '
- '   libadalang=21.0.0

  '
- '   libgmp=6.3.0

  '
- '   libgpr=21.0.0

  '
- '   xmlada=21.0.0

  '
- 'Dependencies (graph):

  '
- '   gnatcoll=21.0.0        --> libgpr=21.0.0 (~21.0.0)

  '
- '   gnatcoll_gmp=21.0.0    --> gnatcoll=21.0.0 (~21.0.0)

  '
- '   gnatcoll_gmp=21.0.0    --> libgmp=6.3.0 (*)

  '
- '   gnatcoll_iconv=21.0.0  --> gnatcoll=21.0.0 (~21.0.0)

  '
- '   langkit_support=21.0.0 --> gnatcoll=21.0.0 (^21)

  '
- '   langkit_support=21.0.0 --> gnatcoll_iconv=21.0.0 (^21)

  '
- '   libadalang=21.0.0      --> gnatcoll=21.0.0 (^21)

  '
- '   libadalang=21.0.0      --> gnatcoll_gmp=21.0.0 (^21)

  '
- '   libadalang=21.0.0      --> gnatcoll_iconv=21.0.0 (^21)

  '
- '   libadalang=21.0.0      --> langkit_support=21.0.0 (^21)

  '
- '   libadalang2xml=1.0.2   --> libadalang=21.0.0 (*)

  '
- '   libgpr=21.0.0          --> gnat=10.3.2 (gnat_native) (/=2021)

  '
- '   libgpr=21.0.0          --> xmlada=21.0.0 (~21.0.0)

  '
- '

  '
- '

  LOG:

  '
- 'Spawning: alr -d -n get --build libadalang2xml=1.0.2

  '
- 'Note: Deploying libadalang2xml=1.0.2...

  '
- 'Note: Deploying xmlada=21.0.0...

  '
- "#=#=#                                                                         \
  \ \n"
- "##O#-#                                                                        \
  \ \n"
- "##=O#- #                                                                      \
  \ \n"
- 'Note: Deploying libgpr=21.0.0...

  '
- "#=#=#                                                                         \
  \ \n"
- "##O#-#                                                                        \
  \ \n"
- "##=O#- #                                                                      \
  \ \n"
- 'Note: Deploying gnatcoll=21.0.0...

  '
- "#=#=#                                                                         \
  \ \n"
- "##O#-#                                                                        \
  \ \n"
- "##=O#- #                                                                      \
  \ \n"
- 'Note: Deploying gnatcoll_gmp=21.0.0...

  '
- "#=#=#                                                                         \
  \ \n"
- "##O#-#                                                                        \
  \ \n"
- 'Note: Deploying gnatcoll_iconv=21.0.0...

  '
- "#=#=#                                                                         \
  \ \n"
- 'Note: Deploying langkit_support=21.0.0...

  '
- "#=#=#                                                                         \
  \ \n"
- '

  '
- '######                                                                     9.6%

  '
- '######################################################################## 100.0%

  '
- 'Note: Deploying libadalang=21.0.0...

  '
- "#=#=#                                                                         \
  \ \n"
- '

  '
- '                                                                           1.1%

  '
- '######################################################################## 100.0%

  '
- 'Note: Running post-fetch actions for xmlada=21.0.0...

  '
- 'checking build system type... x86_64-apple-darwin21.6.0

  '
- 'checking host system type... x86_64-apple-darwin21.6.0

  '
- 'checking target system type... x86_64-apple-darwin21.6.0

  '
- 'checking whether gnat can build shared libs... yes

  '
- 'checking for a BSD-compatible install... /usr/bin/install -c

  '
- 'checking whether ln -s works... yes

  '
- 'configure: creating ./config.status

  '
- 'config.status: creating xmlada_shared.gpr

  '
- 'config.status: creating Makefile

  '
- 'config.status: creating tests/dom/default.gpr

  '
- 'Note: Running post-fetch actions for libgpr=21.0.0...

  '
- 'Note: Building libadalang2xml=1.0.2/libadalang2xml.gpr...

  '
- 'Setup

  '
- '   [mkdir]        object directory for project XmlAda_Sax

  '
- '   [mkdir]        library directory for project XmlAda_Sax

  '
- '   [mkdir]        object directory for project XmlAda_Schema

  '
- '   [mkdir]        object directory for project GPR

  '
- '   [mkdir]        library directory for project GPR

  '
- '   [mkdir]        object directory for project GnatColl

  '
- '   [mkdir]        library directory for project GnatColl

  '
- '   [mkdir]        object directory for project GnatColl_GMP

  '
- '   [mkdir]        library directory for project GnatColl_GMP

  '
- '   [mkdir]        object directory for project GnatColl_Iconv

  '
- '   [mkdir]        library directory for project GnatColl_Iconv

  '
- '   [mkdir]        object directory for project Langkit_Support

  '
- '   [mkdir]        library directory for project Langkit_Support

  '
- '   [mkdir]        object directory for project Libadalang

  '
- '   [mkdir]        library directory for project Libadalang

  '
- '   [mkdir]        object directory for project Libadalang2xml

  '
- '   [mkdir]        exec directory for project Libadalang2xml

  '
- 'Compile

  '
- '   [Ada]          libadalang2xml.adb

  '
- '   [Ada]          langkit_support-adalog-main_support.adb

  '
- '   [Ada]          langkit_support-symbols.adb

  '
- 'gnat1: invalid switch: -gnat2022

  '
- '

  '
- '   compilation of libadalang2xml.adb failed

  '
- '

  '
- 'gprbuild: *** compilation phase failed

  '
- 'stderr: Command ["gprbuild", "-s", "-j0", "-p", "-P", "/Users/runner/work/alire-crates-ci/alire-crates-ci/test/e59f8545-44ce-4d5b-b7cc-371796659ead/libadalang2xml_1.0.2_99ee1dd1/libadalang2xml.gpr"]
  exited with code 4

  '
- 'ERROR: Command ["gprbuild", "-s", "-j0", "-p", "-P", "/Users/runner/work/alire-crates-ci/alire-crates-ci/test/e59f8545-44ce-4d5b-b7cc-371796659ead/libadalang2xml_1.0.2_99ee1dd1/libadalang2xml.gpr"]
  exited with code 4

  '
- 'stderr: ALIRE.CHECKED_ERROR

  '
- 'stderr: Command ["gprbuild", "-s", "-j0", "-p", "-P", "/Users/runner/work/alire-crates-ci/alire-crates-ci/test/e59f8545-44ce-4d5b-b7cc-371796659ead/libadalang2xml_1.0.2_99ee1dd1/libadalang2xml.gpr"]
  exited with code 4

  '
- 'stderr: raised ALIRE.CHECKED_ERROR : alire-stored-error:1

  '
- 'Load address: 0x104db9000

  '
- 'Call stack traceback locations:

  '
- '0x1057c3878 0x10540f154 0x1056914cd 0x105691beb 0x1055c0c5a 0x1055bee49 0x1055e6a5f
  0x1056553b4 0x1056541ec 0x1055e6b8e 0x1055e6dc5 0x1055bf636 0x1055bf711 0x104e2f232
  0x104e3395b 0x104e33bf3 0x104ec4902 0x104ed0eda 0x104dbd64a 0x104dc0cfe

  '
- '

  '
- '

  '
- 'Warning: libadalang2xml=1.0.2 successfully retrieved but its build failed.

  '
- 'Dependencies were solved as follows:

  '
- '

  '
- '   +b gnat            10.3.2 (new,gnat_native,indirect,binary)

  '
- '   +  gnatcoll        21.0.0 (new,indirect)

  '
- '   +  gnatcoll_gmp    21.0.0 (new,indirect)

  '
- '   +  gnatcoll_iconv  21.0.0 (new,indirect)

  '
- '   +  langkit_support 21.0.0 (new,indirect)

  '
- '   +  libadalang      21.0.0 (new)

  '
- '   +b libgmp          6.3.0  (new,indirect,system package)

  '
- '   +  libgpr          21.0.0 (new,indirect)

  '
- '   +  xmlada          21.0.0 (new,indirect)

  '
- 'ERROR: Build ended with errors

  '
platform: macos
status: failing
version: 1.0.2
