Test ran at 2022-05-30 05:52:36.106894+00:00

SOLUTION:
mcp2221=1.20220.1: MCP2221 USB Raw HID I/O Expander Library for GNAT Ada
Origin: source archive mcp2221-1.20220.1.tbz2 at http://repo.munts.com/alire/mcp2221-1.20220.1.tbz2 with hashes sha256:af01ab3406c53ddb317ffef3ed510aec2f0cdbd3a8435d37004c0d1bb6d14422, sha512:4bb16b3cfce2e0bf88c8827281251ed64ae4edac24f02347406c8360cf4e7baaaf0623dda95d1eda87fdb93c1eed1baabe5c1553654d8b73a56140c7e2ae5c55
Available when: (case OS is Linux => True, Windows => True, others => False)
Properties:
   case OS is
      when Linux => Post_Fetch run: ${CRATE_DIR}/./sh -c sed -i 's/lhidapi/lhidapi-hidraw/g' src/objects/hid/hid-hidapi.ads
      when Windows => Post_Fetch run: ${CRATE_DIR}/./sh -c mkdir -p ./bin && cp src/win64/*.dll ./bin && mkdir -p ./lib && cp src/win64/*.dll ./lib
   Author: Philip Munts
   Description: MCP2221 USB Raw HID I/O Expander Library for GNAT Ada
   License: BSD-1-Clause
   Maintainer: Philip Munts <phil@munts.net>
   Maintainers_Logins: pmunts
   Name: mcp2221
   Project_File: mcp2221.gpr
   Project_File: programs.gpr
   Tag: embedded
   Tag: linux
   Tag: mcp2221
   Tag: adc
   Tag: dac
   Tag: gpio
   Tag: i2c
   Tag: motor
   Tag: pwm
   Tag: sensor
   Tag: serial
   Tag: servo
   Tag: spi
   Tag: stepper
   Version: 1.20220.1
   Website: https://github.com/pmunts/libsimpleio
Dependencies (direct):
   case OS is
      when Linux => libhidapi*
   case OS is
      when Linux => libusb~1.0
Dependencies (solution):
   libhidapi=0.11.2
   libusb=1.0.26
Dependencies (graph):
   mcp2221=1.20220.1 --> libhidapi=0.11.2 (*)
   mcp2221=1.20220.1 --> libusb=1.0.26 (~1.0)


LOG:
Note: Deploying release mcp2221=1.20220.1...
#=#=#                                                                         

###########                                                               15.9%
#######################                                                   33.3%
#######################################################################   99.9%
######################################################################## 100.0%
Note: Deploying release libhidapi=0.11.2...
The system package 'hidapi' is about to be installed.
This action might require admin privileges and impact your system installation.
Do you want Alire to install this system package?
Using default: Yes
resolving dependencies...
looking for conflicting packages...

Package (1)       New Version  Net Change  Download Size

community/hidapi  0.11.2-1       0.08 MiB       0.03 MiB

Total Download Size:   0.03 MiB
Total Installed Size:  0.08 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 hidapi-0.11.2-1-x86_64 downloading...
checking keyring...
checking package integrity...
loading package files...
checking for file conflicts...
:: Processing package changes...
installing hidapi...
Optional dependencies for hidapi
    libusb: for the libusb backend -- hidapi-libusb.so
    libudev.so: for the hidraw backend -- hidapi-hidraw.so [installed]
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
Note: Deploying release libusb=1.0.26...
The system package 'libusb' is about to be installed.
This action might require admin privileges and impact your system installation.
Do you want Alire to install this system package?
Using default: Yes
resolving dependencies...
looking for conflicting packages...

Package (1)  New Version  Net Change  Download Size

core/libusb  1.0.26-1       0.21 MiB       0.07 MiB

Total Download Size:   0.07 MiB
Total Installed Size:  0.21 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 libusb-1.0.26-1-x86_64 downloading...
checking keyring...
checking package integrity...
loading package files...
checking for file conflicts...
:: Processing package changes...
installing libusb...
:: Running post-transaction hooks...
(1/1) Arming ConditionNeedsUpdate...
Note: Running post_fetch actions for mcp2221=1.20220.1...
Setup
   [mkdir]        object directory for project MCP2221
   [mkdir]        library directory for project MCP2221
Compile
   [Ada]          hid-hidapi.adb
   [Ada]          hid-libusb.adb
   [Ada]          thermistor.adb
   [Ada]          servo-pwm.ads
   [Ada]          motor-pwm.adb
   [Ada]          debug.adb
   [Ada]          gpio-pwm.adb
   [Ada]          motor-servo.adb
   [Ada]          messaging.adb
   [Ada]          messaging-text.ads
   [Ada]          servo-pwm_template.adb
   [Ada]          voltage.ads
   [Ada]          message64.ads
   [Ada]          hid.adb
   [Ada]          gyroscope.ads
   [Ada]          motor.ads
   [Ada]          logging.ads
   [Ada]          gpio.ads
   [Ada]          analog.ads
   [Ada]          accelerometer.ads
   [Ada]          angle.ads
   [Ada]          i2c.adb
   [Ada]          messaging-fixed.ads
   [Ada]          magnetometer.ads
   [Ada]          humidity.ads
   [Ada]          io_interfaces.ads
   [Ada]          pressure.ads
   [Ada]          joystick.ads
   [Ada]          resistance.ads
   [Ada]          temperature.ads
   [Ada]          pwm.ads
   [Ada]          adc.adb
   [Ada]          watchdog.ads
   [Ada]          stepper.ads
   [Ada]          dac.adb
   [Ada]          truecolor.ads
   [Ada]          servo.ads
   [Ada]          lsm9ds1.adb
   [Ada]          mcp23017-byte.adb
   [Ada]          tlc1543.adb
   [Ada]          mcp23017.adb
   [Ada]          tcs3472.adb
   [Ada]          mcp2221-hidapi.adb
   [Ada]          th02.adb
   [Ada]          adc121c021.adb
   [Ada]          grove_tb6612-stepper.adb
   [Ada]          mpl3115a2.adb
grove_tb6612-stepper.adb:28:01: warning: "Stepper.Steps" is already use-visible through previous use_type_clause at grove_tb6612-stepper.ads:32
   [Ada]          mcp2221-libusb.adb
   [Ada]          mcp2221.adb
   [Ada]          htu21d.adb
mcp2221.adb:87:23: warning: "resp" modified by call, but value might not be referenced
   [Ada]          grove_adc.ads
   [Ada]          mcp2221-gpio.adb
   [Ada]          pca8574.adb
mcp2221-gpio.adb:130:27: warning: "resp" modified by call, but value might not be referenced
   [Ada]          cytron_md13s.adb
   [Ada]          pca9685-gpio.adb
   [Ada]          mcp23017-word.adb
   [Ada]          grove_temperature_humidity.ads
   [Ada]          hid-munts.ads
   [Ada]          grove_tb6612.adb
   [Ada]          ads1015.adb
   [Ada]          pca8574-gpio.adb
   [Ada]          a4988.adb
   [Ada]          pca9534.adb
   [Ada]          pca9685.adb
   [Ada]          tmp102.adb
   [Ada]          pca9534-gpio.adb
   [Ada]          mcp23017-gpio.adb
   [Ada]          mcp2221-i2c.adb
   [Ada]          grove_tb6612-motor.adb
mcp2221-i2c.adb:61:30: warning: "respmsg" modified by call, but value overwritten at line 68
mcp2221-i2c.adb:106:30: warning: "respmsg" modified by call, but value might not be referenced
mcp2221-i2c.adb:147:30: warning: "respmsg" modified by call, but value overwritten at line 160
mcp2221-i2c.adb:160:30: warning: "respmsg" modified by call, but value overwritten at line 167
   [Ada]          hts221.adb
   [Ada]          mcp2221-adc.adb
   [Ada]          grove_temperature.adb
   [Ada]          bmp280.adb
   [Ada]          pca9685-pwm.adb
   [Ada]          lps25h.adb
   [Ada]          hdc1080.adb
   [Ada]          errno.ads
Build Libraries
   [gprlib]       mcp2221.lexch
   [archive]      libmcp2221.a
   [index]        libmcp2221.a
Setup
   [mkdir]        exec directory for project Programs
Compile
   [Ada]          test_query_hidapi.adb
   [Ada]          test_query_libusb.adb
Bind
   [gprbind]      test_query_hidapi.bexch
   [gprbind]      test_query_libusb.bexch
   [Ada]          test_query_hidapi.ali
   [Ada]          test_query_libusb.ali
Link
   [link]         test_query_hidapi.adb
   [link]         test_query_libusb.adb
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_join@GLIBC_2.34'
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_key_delete@GLIBC_2.34'
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_mutex_trylock@GLIBC_2.34'
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_getspecific@GLIBC_2.34'
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_condattr_setclock@GLIBC_2.34'
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_key_create@GLIBC_2.34'
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_setname_np@GLIBC_2.34'
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_setspecific@GLIBC_2.34'
/usr/sbin/ld: /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/../../../../lib/libusb-1.0.so: undefined reference to `pthread_create@GLIBC_2.34'
collect2: error: ld returned 1 exit status
gprbuild: link of test_query_libusb.adb failed
gprbuild: failed command was: /usr/bin/gcc test_query_libusb.o b__test_query_libusb.o /home/runner/work/alire-crates-ci/alire-crates-ci/test/5a2b2fe9-8935-4a6a-bf83-c0c0e063e9cd/mcp2221_1.20220.1_af01ab34/lib/libmcp2221.a -L/home/runner/work/alire-crates-ci/alire-crates-ci/test/5a2b2fe9-8935-4a6a-bf83-c0c0e063e9cd/mcp2221_1.20220.1_af01ab34/obj/ -L/home/runner/work/alire-crates-ci/alire-crates-ci/test/5a2b2fe9-8935-4a6a-bf83-c0c0e063e9cd/mcp2221_1.20220.1_af01ab34/obj/ -L/home/runner/work/alire-crates-ci/alire-crates-ci/test/5a2b2fe9-8935-4a6a-bf83-c0c0e063e9cd/mcp2221_1.20220.1_af01ab34/lib/ -L/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/adalib/ -static-libgcc -lusb-1.0 /usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/adalib/libgnat.a -ldl -Wl,-rpath-link,/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0//adalib -Wl,-z,origin,-rpath,$ORIGIN/..//obj:$ORIGIN/..//lib:/usr/lib/gcc/x86_64-pc-linux-gnu/11.1.0/adalib -o /home/runner/work/alire-crates-ci/alire-crates-ci/test/5a2b2fe9-8935-4a6a-bf83-c0c0e063e9cd/mcp2221_1.20220.1_af01ab34/bin//test_query_libusb
stderr: Command ["gprbuild", "-gnatwU", "-j0", "-p", "-P", "programs.gpr"] exited with code 4
ERROR: Command ["gprbuild", "-gnatwU", "-j0", "-p", "-P", "programs.gpr"] exited with code 4

Warning: mcp2221=1.20220.1 successfully retrieved but its build failed.
Dependencies were solved as follows:

   + libhidapi 0.11.2 (new)
   + libusb    1.0.26 (new)
ERROR: Build ended with errors
