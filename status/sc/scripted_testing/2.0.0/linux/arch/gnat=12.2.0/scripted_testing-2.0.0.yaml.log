Test ran at 2025-02-02 01:25:12.417926+00:00

SOLUTION:
scripted_testing=2.0.0: Integration testing
Origin: commit 6720b9250e31c58d150d52c554193e22767a0704 from https://github.com/simonjwright/scripted_testing.git
Properties:
   Author: Simon Wright
   Description: Integration testing
   License: GPL-3.0-or-later
   Long_Description: To set the scene, the Ada software under test (SUT) forms part of a system. Generally, the system will be constructed using a layered approach, and the other parts of the system that interact with the SUT are higher-level (which can call interface subprograms presented by the SUT) or lower-level (whose interfaces can be called by the SUT, or which can provide callbacks to the SUT).

This package is intended for testing at a level between unit testing (using, for example, [AUnit](https://github.com/AdaCore/aunit)) and integration testing (using real hardware). Unit testing tends to be fragile, requiring a lot of rework for even minor functional changes in the requirements.

The scripting language supported is [Tcl](http://www.tcl.tk), and specifically the Ada binding [Tash](https://github.com/simonjwright/tcladashell). The reason for choosing Tcl rather than Python or Lua is that Tcl's interface is entirely string-based; this is important, considering the need to specify values of enumerated types.

The package provides facilities to write new commands in Tcl to

* call the interface subprograms presented by the SUT,

* set up values to be returned by calls the SUT makes to lower-level system components,

* call callbacks provided by lower-level system components,

* delay for appropriate periods, and

* check that the proper calls have been made to lower-level system components, with the required values.

It's assumed that the interface subprograms of the lower-level subsystems are stubbed so that:

* `in` and `in out` parameters can be recorded for later checking,

* `out` (and `in out`) parameter values and function `return` values can be provided to be returned to the SUT,

* exceptions can be raised when required,

* the number of calls to the subprogram can be checked.

   Maintainer: Simon Wright <simon@pushface.org>
   Maintainers_Logins: simonjwright
   Name: scripted_testing
   Tag: testing
   Tag: integration
   Tag: scripting
   Version: 2.0.0
   Website: https://github.com/simonjwright/scripted_testing.git
Dependencies (direct):
   tash^8.7.0
Dependencies (solution):
   libtcl=8.6.13
   libtk=8.6.13
   tash=8.7.2
Dependencies (graph):
   scripted_testing=2.0.0 --> tash=8.7.2 (^8.7.0)   
   tash=8.7.2             --> libtcl=8.6.13 (~8.6.0)
   tash=8.7.2             --> libtk=8.6.13 (~8.6.0) 


LOG:
Note: Deploying scripted_testing=2.0.0...
Note: Deploying libtcl=8.6.13...
The system package 'tcl8.6-dev' is about to be installed.
This action might require admin privileges and impact your system installation.
Do you want Alire to install this system package?
Using default: Yes
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package libtcl8.6:amd64.
(Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 25719 files and directories currently installed.)
Preparing to unpack .../libtcl8.6_8.6.13+dfsg-2_amd64.deb ...
Unpacking libtcl8.6:amd64 (8.6.13+dfsg-2) ...
Selecting previously unselected package tcl8.6.
Preparing to unpack .../tcl8.6_8.6.13+dfsg-2_amd64.deb ...
Unpacking tcl8.6 (8.6.13+dfsg-2) ...
Selecting previously unselected package tcl8.6-dev:amd64.
Preparing to unpack .../tcl8.6-dev_8.6.13+dfsg-2_amd64.deb ...
Unpacking tcl8.6-dev:amd64 (8.6.13+dfsg-2) ...
Setting up libtcl8.6:amd64 (8.6.13+dfsg-2) ...
Setting up tcl8.6 (8.6.13+dfsg-2) ...
Setting up tcl8.6-dev:amd64 (8.6.13+dfsg-2) ...
Processing triggers for libc-bin (2.36-9+deb12u8) ...
Note: Deploying libtk=8.6.13...
The system package 'tk8.6-dev' is about to be installed.
This action might require admin privileges and impact your system installation.
Do you want Alire to install this system package?
Using default: Yes
debconf: delaying package configuration, since apt-utils is not installed
Selecting previously unselected package libbrotli-dev:amd64.
(Reading database ... 
(Reading database ... 5%
(Reading database ... 10%
(Reading database ... 15%
(Reading database ... 20%
(Reading database ... 25%
(Reading database ... 30%
(Reading database ... 35%
(Reading database ... 40%
(Reading database ... 45%
(Reading database ... 50%
(Reading database ... 55%
(Reading database ... 60%
(Reading database ... 65%
(Reading database ... 70%
(Reading database ... 75%
(Reading database ... 80%
(Reading database ... 85%
(Reading database ... 90%
(Reading database ... 95%
(Reading database ... 100%
(Reading database ... 26039 files and directories currently installed.)
Preparing to unpack .../00-libbrotli-dev_1.0.9-2+b6_amd64.deb ...
Unpacking libbrotli-dev:amd64 (1.0.9-2+b6) ...
Selecting previously unselected package libpng-dev:amd64.
Preparing to unpack .../01-libpng-dev_1.6.39-2_amd64.deb ...
Unpacking libpng-dev:amd64 (1.6.39-2) ...
Selecting previously unselected package libfreetype-dev:amd64.
Preparing to unpack .../02-libfreetype-dev_2.12.1+dfsg-5+deb12u3_amd64.deb ...
Unpacking libfreetype-dev:amd64 (2.12.1+dfsg-5+deb12u3) ...
Selecting previously unselected package libfontconfig-dev:amd64.
Preparing to unpack .../03-libfontconfig-dev_2.14.1-4_amd64.deb ...
Unpacking libfontconfig-dev:amd64 (2.14.1-4) ...
Selecting previously unselected package libfontconfig1-dev:amd64.
Preparing to unpack .../04-libfontconfig1-dev_2.14.1-4_amd64.deb ...
Unpacking libfontconfig1-dev:amd64 (2.14.1-4) ...
Selecting previously unselected package libpng-tools.
Preparing to unpack .../05-libpng-tools_1.6.39-2_amd64.deb ...
Unpacking libpng-tools (1.6.39-2) ...
Selecting previously unselected package libpthread-stubs0-dev:amd64.
Preparing to unpack .../06-libpthread-stubs0-dev_0.4-1_amd64.deb ...
Unpacking libpthread-stubs0-dev:amd64 (0.4-1) ...
Selecting previously unselected package libxrender1:amd64.
Preparing to unpack .../07-libxrender1_1%3a0.9.10-1.1_amd64.deb ...
Unpacking libxrender1:amd64 (1:0.9.10-1.1) ...
Selecting previously unselected package libxft2:amd64.
Preparing to unpack .../08-libxft2_2.3.6-1_amd64.deb ...
Unpacking libxft2:amd64 (2.3.6-1) ...
Selecting previously unselected package x11-common.
Preparing to unpack .../09-x11-common_1%3a7.7+23_all.deb ...
Unpacking x11-common (1:7.7+23) ...
Selecting previously unselected package libxss1:amd64.
Preparing to unpack .../10-libxss1_1%3a1.2.3-1_amd64.deb ...
Unpacking libxss1:amd64 (1:1.2.3-1) ...
Selecting previously unselected package libtk8.6:amd64.
Preparing to unpack .../11-libtk8.6_8.6.13-2_amd64.deb ...
Unpacking libtk8.6:amd64 (8.6.13-2) ...
Selecting previously unselected package xorg-sgml-doctools.
Preparing to unpack .../12-xorg-sgml-doctools_1%3a1.11-1.1_all.deb ...
Unpacking xorg-sgml-doctools (1:1.11-1.1) ...
Selecting previously unselected package x11proto-dev.
Preparing to unpack .../13-x11proto-dev_2022.1-1_all.deb ...
Unpacking x11proto-dev (2022.1-1) ...
Selecting previously unselected package libxau-dev:amd64.
Preparing to unpack .../14-libxau-dev_1%3a1.0.9-1_amd64.deb ...
Unpacking libxau-dev:amd64 (1:1.0.9-1) ...
Selecting previously unselected package x11proto-core-dev.
Preparing to unpack .../15-x11proto-core-dev_2022.1-1_all.deb ...
Unpacking x11proto-core-dev (2022.1-1) ...
Selecting previously unselected package libxdmcp-dev:amd64.
Preparing to unpack .../16-libxdmcp-dev_1%3a1.1.2-3_amd64.deb ...
Unpacking libxdmcp-dev:amd64 (1:1.1.2-3) ...
Selecting previously unselected package xtrans-dev.
Preparing to unpack .../17-xtrans-dev_1.4.0-1_all.deb ...
Unpacking xtrans-dev (1.4.0-1) ...
Selecting previously unselected package libxcb1-dev:amd64.
Preparing to unpack .../18-libxcb1-dev_1.15-1_amd64.deb ...
Unpacking libxcb1-dev:amd64 (1.15-1) ...
Selecting previously unselected package libx11-dev:amd64.
Preparing to unpack .../19-libx11-dev_2%3a1.8.4-2+deb12u2_amd64.deb ...
Unpacking libx11-dev:amd64 (2:1.8.4-2+deb12u2) ...
Selecting previously unselected package libxext-dev:amd64.
Preparing to unpack .../20-libxext-dev_2%3a1.3.4-1+b1_amd64.deb ...
Unpacking libxext-dev:amd64 (2:1.3.4-1+b1) ...
Selecting previously unselected package libxrender-dev:amd64.
Preparing to unpack .../21-libxrender-dev_1%3a0.9.10-1.1_amd64.deb ...
Unpacking libxrender-dev:amd64 (1:0.9.10-1.1) ...
Selecting previously unselected package libxft-dev:amd64.
Preparing to unpack .../22-libxft-dev_2.3.6-1_amd64.deb ...
Unpacking libxft-dev:amd64 (2.3.6-1) ...
Selecting previously unselected package libxss-dev:amd64.
Preparing to unpack .../23-libxss-dev_1%3a1.2.3-1_amd64.deb ...
Unpacking libxss-dev:amd64 (1:1.2.3-1) ...
Selecting previously unselected package tk8.6.
Preparing to unpack .../24-tk8.6_8.6.13-2_amd64.deb ...
Unpacking tk8.6 (8.6.13-2) ...
Selecting previously unselected package tk8.6-dev:amd64.
Preparing to unpack .../25-tk8.6-dev_8.6.13-2_amd64.deb ...
Unpacking tk8.6-dev:amd64 (8.6.13-2) ...
Setting up libxrender1:amd64 (1:0.9.10-1.1) ...
Setting up libpng-tools (1.6.39-2) ...
Setting up libpng-dev:amd64 (1.6.39-2) ...
Setting up x11-common (1:7.7+23) ...
debconf: unable to initialize frontend: Dialog
debconf: (Dialog frontend will not work on a dumb terminal, an emacs shell buffer, or without a controlling terminal.)
debconf: falling back to frontend: Readline
debconf: unable to initialize frontend: Readline
debconf: (This frontend requires a controlling tty.)
debconf: falling back to frontend: Teletype
invoke-rc.d: could not determine current runlevel
invoke-rc.d: policy-rc.d denied execution of restart.
Setting up libpthread-stubs0-dev:amd64 (0.4-1) ...
Setting up xtrans-dev (1.4.0-1) ...
Setting up xorg-sgml-doctools (1:1.11-1.1) ...
Setting up libxss1:amd64 (1:1.2.3-1) ...
Setting up libbrotli-dev:amd64 (1.0.9-2+b6) ...
Setting up x11proto-dev (2022.1-1) ...
Setting up libxft2:amd64 (2.3.6-1) ...
Setting up libxau-dev:amd64 (1:1.0.9-1) ...
Setting up libtk8.6:amd64 (8.6.13-2) ...
Setting up libfreetype-dev:amd64 (2.12.1+dfsg-5+deb12u3) ...
Setting up libxdmcp-dev:amd64 (1:1.1.2-3) ...
Setting up x11proto-core-dev (2022.1-1) ...
Setting up tk8.6 (8.6.13-2) ...
Setting up libxcb1-dev:amd64 (1.15-1) ...
Setting up libfontconfig-dev:amd64 (2.14.1-4) ...
Setting up libx11-dev:amd64 (2:1.8.4-2+deb12u2) ...
Setting up libxext-dev:amd64 (2:1.3.4-1+b1) ...
Setting up libxrender-dev:amd64 (1:0.9.10-1.1) ...
Setting up libxft-dev:amd64 (2.3.6-1) ...
Setting up libfontconfig1-dev:amd64 (2.14.1-4) ...
Setting up libxss-dev:amd64 (1:1.2.3-1) ...
Setting up tk8.6-dev:amd64 (8.6.13-2) ...
Processing triggers for libc-bin (2.36-9+deb12u8) ...
Note: Deploying tash=8.7.2...
Note: Running post_fetch actions for tash=8.7.2...
make: Entering directory '/home/runner/work/alire-crates-ci/alire-crates-ci/test/1e402ec5-5738-4439-875b-8b0e52ece47f/scripted_testing_2.0.0_6720b925/alire/cache/dependencies/tash_8.7.2_4c588c12/src'
tclsh8.6 tcl_record_sizes.tcl >tcl_record_sizes.c
gprbuild -P tcl_record_sizes.gpr -o tcl_record_sizes.exe
Setup
   [mkdir]        object directory for project Tcl_Record_Sizes
Compile
   [c]            tcl_record_sizes.c
Link
   [archive]      libtcl_record_sizes.a
   [index]        libtcl_record_sizes.a
   [link]         tcl_record_sizes.c
./tcl_record_sizes.exe >tcl_record_sizes.ads
make: Leaving directory '/home/runner/work/alire-crates-ci/alire-crates-ci/test/1e402ec5-5738-4439-875b-8b0e52ece47f/scripted_testing_2.0.0_6720b925/alire/cache/dependencies/tash_8.7.2_4c588c12/src'
Note: Building scripted_testing/scripted_testing.gpr...
Setup
   [mkdir]        object directory for project Tash
   [mkdir]        library directory for project Tash
   [mkdir]        object directory for project Scripted_Testing
   [mkdir]        library directory for project Scripted_Testing
Compile
   [c]            tkmacro.c
   [c]            tclmacro.c
   [ada]          tcl_record_sizes.ads
   [ada]          chelper.adb
   [ada]          cargv.adb
   [ada]          tcl-async.adb
   [ada]          tcl.adb
   [ada]          tcl-ada.adb
   [ada]          tcl-tk.adb
   [ada]          tcl-tk-ada.adb
   [Ada]          scripted_testing.adb
Build Libraries
   [gprlib]       tash.lexch
   [gprlib]       scripted_testing.lexch
   [archive]      libtash.a
   [index]        libtash.a
   [archive]      libscripted_testing.a
   [index]        libscripted_testing.a
Build finished successfully in 4.46 seconds.

scripted_testing=2.0.0 successfully retrieved and built.
Dependencies were solved as follows:

   + libtcl 8.6.13 (new,indirect)
   + libtk  8.6.13 (new,indirect)
   + tash   8.7.2  (new)         
Found declared GPR file: scripted_testing.gpr
