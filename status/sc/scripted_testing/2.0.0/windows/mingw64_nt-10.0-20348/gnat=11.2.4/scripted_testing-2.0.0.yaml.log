Test ran at 2025-01-24 00:44:45.824295+00:00

SOLUTION:
scripted_testing=2.0.0: Integration testing
Origin: commit 6720b9250e31c58d150d52c554193e22767a0704 from https://github.com/simonjwright/scripted_testing.git
Properties:
   Author: Simon Wright
   Description: Integration testing
   License: GPL-3.0-or-later
   Long_Description: To set the scene, the Ada software under test (SUT) forms part of a system. Generally, the system will be constructed using a layered approach, and the other parts of the system that interact with the SUT are higher-level (which can call interface subprograms presented by the SUT) or lower-level (whose interfaces can be called by the SUT, or which can provide callbacks to the SUT).

This package is intended for testing at a level between unit testing (using, for example, [AUnit](https://github.com/AdaCore/aunit)) and integration testing (using real hardware). Unit testing tends to be fragile, requiring a lot of rework for even minor functional changes in the requirements.

The scripting language supported is [Tcl](http://www.tcl.tk), and specifically the Ada binding [Tash](https://github.com/simonjwright/tcladashell). The reason for choosing Tcl rather than Python or Lua is that Tcl's interface is entirely string-based; this is important, considering the need to specify values of enumerated types.

The package provides facilities to write new commands in Tcl to

* call the interface subprograms presented by the SUT,

* set up values to be returned by calls the SUT makes to lower-level system components,

* call callbacks provided by lower-level system components,

* delay for appropriate periods, and

* check that the proper calls have been made to lower-level system components, with the required values.

It's assumed that the interface subprograms of the lower-level subsystems are stubbed so that:

* `in` and `in out` parameters can be recorded for later checking,

* `out` (and `in out`) parameter values and function `return` values can be provided to be returned to the SUT,

* exceptions can be raised when required,

* the number of calls to the subprogram can be checked.

   Maintainer: Simon Wright <simon@pushface.org>
   Maintainers_Logins: simonjwright
   Name: scripted_testing
   Tag: testing
   Tag: integration
   Tag: scripting
   Version: 2.0.0
   Website: https://github.com/simonjwright/scripted_testing.git
Dependencies (direct):
   tash^8.7.0
Dependencies (solution):
   libtcl=8.6.12
   libtk=8.6.12
   tash=8.7.2
Dependencies (graph):
   scripted_testing=2.0.0 --> tash=8.7.2 (^8.7.0)   
   tash=8.7.2             --> libtcl=8.6.12 (~8.6.0)
   tash=8.7.2             --> libtk=8.6.12 (~8.6.0) 


LOG:
Note: Deploying scripted_testing=2.0.0...
Note: Deploying libtcl=8.6.12...
The system package 'mingw-w64-x86_64-tcl' is about to be installed.
This action might require admin privileges and impact your system installation.
Do you want Alire to install this system package?
Using default: Yes
resolving dependencies...
looking for conflicting packages...

Packages (4) mingw-w64-x86_64-gcc-libs-12.2.0-10  mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1  mingw-w64-x86_64-zlib-1.2.13-3  mingw-w64-x86_64-tcl-8.6.12-1

Total Download Size:    3.63 MiB
Total Installed Size:  12.93 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 mingw-w64-x86_64-tcl-8.6.12-1-any downloading...
 mingw-w64-x86_64-gcc-libs-12.2.0-10-any downloading...
 mingw-w64-x86_64-zlib-1.2.13-3-any downloading...
 mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any downloading...
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.msys2.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.msys2.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from repo.msys2.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from repo.msys2.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.umd.edu : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.umd.edu : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.yandex.ru : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from download.nus.edu.sg : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from ftp.acc.umu.se : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from ftp.nluug.nl : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.yandex.ru : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from ftp.osuosl.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from download.nus.edu.sg : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from ftp.acc.umu.se : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from ftp.nluug.nl : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.internet.asn.au : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from ftp.osuosl.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.internet.asn.au : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.selfnet.de : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.selfnet.de : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.ufro.cl : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.ufro.cl : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirrors.dotsrc.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirrors.dotsrc.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirrors.bfsu.edu.cn : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirrors.bfsu.edu.cn : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirrors.tuna.tsinghua.edu.cn : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirrors.tuna.tsinghua.edu.cn : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirrors.ustc.edu.cn : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirrors.ustc.edu.cn : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.nju.edu.cn : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.nju.edu.cn : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from repo.extreme-ix.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from repo.extreme-ix.org : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirrors.hit.edu.cn : Failed to connect to mirrors.hit.edu.cn port 443 after 10001 ms: Timeout was reached
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirrors.hit.edu.cn : Failed to connect to mirrors.hit.edu.cn port 443 after 10001 ms: Timeout was reached
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.clarkson.edu : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.clarkson.edu : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from quantum-mirror.hu : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from quantum-mirror.hu : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror2.sandyriver.net : Failed to connect to mirror2.sandyriver.net port 443 after 10008 ms: Timeout was reached
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror2.sandyriver.net : Failed to connect to mirror2.sandyriver.net port 443 after 10012 ms: Timeout was reached
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.archlinux.tw : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.archlinux.tw : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from fastmirror.pp.ua : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from fastmirror.pp.ua : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from ftp.cc.uoc.gr : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from ftp.cc.uoc.gr : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirror.jmu.edu : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirror.jmu.edu : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-libwinpthread-git-10.0.0.r248.g5f566373f-1-any.pkg.tar.zst' from mirrors.piconets.webwerks.in : The requested URL returned error: 404
error: failed retrieving file 'mingw-w64-x86_64-tcl-8.6.12-1-any.pkg.tar.zst' from mirrors.piconets.webwerks.in : The requested URL returned error: 404
checking keyring...
checking package integrity...
loading package files...
checking for file conflicts...
checking available disk space...
:: Processing package changes...
installing mingw-w64-x86_64-libwinpthread-git...
installing mingw-w64-x86_64-gcc-libs...
installing mingw-w64-x86_64-zlib...
installing mingw-w64-x86_64-tcl...
Note: Deploying libtk=8.6.12...
The system package 'mingw-w64-x86_64-tk' is about to be installed.
This action might require admin privileges and impact your system installation.
Do you want Alire to install this system package?
Using default: Yes
resolving dependencies...
looking for conflicting packages...

Packages (1) mingw-w64-x86_64-tk-8.6.12-1

Total Download Size:   1.94 MiB
Total Installed Size:  5.60 MiB

:: Proceed with installation? [Y/n] 
:: Retrieving packages...
 mingw-w64-x86_64-tk-8.6.12-1-any downloading...
checking keyring...
checking package integrity...
loading package files...
checking for file conflicts...
checking available disk space...
:: Processing package changes...
installing mingw-w64-x86_64-tk...
Note: Deploying tash=8.7.2...
Note: Running post_fetch actions for tash=8.7.2...
make: Entering directory '/d/a/alire-crates-ci/alire-crates-ci/test/50875476-3aa1-4718-9218-a2f03125248d/scripted_testing_2.0.0_6720b925/alire/cache/dependencies/tash_8.7.2_4c588c12/src'
tclsh tcl_record_sizes.tcl >tcl_record_sizes.c
gprbuild -P tcl_record_sizes.gpr -o tcl_record_sizes.exe
Setup
   [mkdir]        object directory for project Tcl_Record_Sizes
Compile
   [c]            tcl_record_sizes.c
Link
   [archive]      libtcl_record_sizes.a
   [index]        libtcl_record_sizes.a
   [link]         tcl_record_sizes.c
./tcl_record_sizes.exe >tcl_record_sizes.ads
make: Leaving directory '/d/a/alire-crates-ci/alire-crates-ci/test/50875476-3aa1-4718-9218-a2f03125248d/scripted_testing_2.0.0_6720b925/alire/cache/dependencies/tash_8.7.2_4c588c12/src'
Note: Building scripted_testing/scripted_testing.gpr...
Setup
   [mkdir]        object directory for project Tash
   [mkdir]        library directory for project Tash
   [mkdir]        object directory for project Scripted_Testing
   [mkdir]        library directory for project Scripted_Testing
Compile
   [c]            tkmacro.c
   [c]            tclmacro.c
   [ada]          tcl_record_sizes.ads
   [ada]          tcl.adb
   [ada]          tcl-tk.adb
   [ada]          tcl-tk-ada.adb
   [ada]          tcl-async.adb
   [ada]          tcl-ada.adb
   [ada]          chelper.adb
   [ada]          cargv.adb
   [Ada]          scripted_testing.adb
Build Libraries
   [gprlib]       tash.lexch
   [gprlib]       scripted_testing.lexch
   [archive]      libtash.a
   [index]        libtash.a
   [archive]      libscripted_testing.a
   [index]        libscripted_testing.a
Build finished successfully in 6.14 seconds.

scripted_testing=2.0.0 successfully retrieved and built.
Dependencies were solved as follows:

   + libtcl 8.6.12 (new,indirect)
   + libtk  8.6.12 (new,indirect)
   + tash   8.7.2  (new)         
Found declared GPR file: scripted_testing.gpr
